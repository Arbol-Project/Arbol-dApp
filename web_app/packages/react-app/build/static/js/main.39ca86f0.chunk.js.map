{"version":3,"sources":["components/index.js","Arbol_logo.png","hooks/useWeb3Modal.js","../../contracts/src/addresses.js","../../contracts/src/abis.js","App.js","index.js"],"names":["themeOptions","palette","type","primary","main","secondary","background","default","paper","text","Body","styled","header","div","Col","Image","img","Text","p","Link","a","attrs","target","rel","button","props","hidden","INFURA_ID","NETWORK","useWeb3Modal","config","useState","provider","setProvider","autoLoaded","setAutoLoaded","autoLoad","providerID","network","web3Modal","useMemo","Web3Modal","cacheProvider","providerOptions","walletconnect","package","WalletConnectProvider","options","infuraid","loadWeb3Modal","useCallback","connect","newProvider","Web3Provider","logoutOfWeb3Modal","clearCachedProvider","window","location","reload","useEffect","cachedProvider","console","log","abis","RainfallDerivativeProvider","RainfallDerivativeProviderAbi","abi","RainfallOption","RainfallOptionAbi","BlizzardDerivativeProvider","BlizzardDerivativeProviderAbi","BlizzardOption","BlizzardOptionAbi","erc20","erc20Abi","Contracts","require","Providers","_addresses","LINK","USDC","Object","entries","cname","cdata","address","pname","pdata","addresses","theme","createTheme","addressBook","WalletButton","account","setAccount","rendered","setRendered","listAccounts","accounts","substring","error","fetchAccount","variant","sx","onClick","App","internalRows","setInternalRows","tokenRows","setTokenRows","data","new_rows","i","length","row","date","Date","parseInt","toISOString","startsWith","getAddress","push","reverse","deploy_hashes","j","includes","depositUSDC","_provider","defaultSigner","getSigner","defaultAddress","MainContract","Contract","usdc","ORACLE_BANK","oracleBank","COLLATERAL_ADDRESS","collateralAddress","PREMIUM_ADDRESS","premiumAddress","COLLATERAL_PAYMENT","collateralAmount","PREMIUM_PAYMENT","premiumAmount","approve","tx","wait","depositCollateral","depositPremium","blizzardContract","deployedAddress","fetch","process","REACT_APP_ETHERSCAN_KEY","then","resp","json","tokenDataSetter","result","internalDataSetter","ThemeProvider","Box","flexGrow","AppBar","position","Toolbar","href","style","textDecoration","marginTop","fontSize","Grid","container","direction","justifyContent","alignItems","item","xs","src","logo","alt","height","width","marginBottom","rows","columns","field","headerName","pageSize","rowsPerPageOptions","client","ApolloClient","uri","ReactDOM","render","ApolloProvider","value","document","getElementById"],"mappings":"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","file":"static/js/main.39ca86f0.chunk.js","sourcesContent":["import styled from \"styled-components\";\n// import { ThemeOptions } from '@material-ui/core/styles/createMuiTheme';\n\nexport const themeOptions = {\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#124125',\n    },\n    secondary: {\n      main: '#ffc400',\n    },\n    background: {\n      default: '#0c180c',\n      paper: '#303939',\n    },\n    text: {\n      primary: '#ffffff',\n    },\n  },\n};\n\nexport const Header = styled.header`\n  background-color: ${themeOptions.palette.primary.main};\n  min-height: 70px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  color: white;\n`;\n\nexport const Body = styled.div`\n  align-items: center;\n  background-color: ${themeOptions.palette.background.default};\n  color: white;\n  display: flex;\n  flex-direction: row;\n  font-size: calc(10px + 2vmin);\n  justify-content: center;\n  min-height: calc(70vh);\n  font-family: Inter;\n`;\n\nexport const Col = styled.div`\n  align-items: center;\n  color: white;\n  display: flex;\n  flex-direction: column;\n  font-size: calc(10px + 2vmin);\n  justify-content: center;\n  min-height: calc(100vh);\n  font-family: Inter;\n  margin-left: 8px;\n  margin-right: 8px;\n`;\n\nexport const Image = styled.img`\n  height: 25vmin;\n  margin-bottom: 8px;\n  pointer-events: none;\n`;\n\nexport const Title = styled.p`\n  color: ${themeOptions.palette.secondary.main};\n  margin-top: 8px;\n  margin-bottom: 8px;\n  margin-left: 8px;\n  font-size: calc(12px + 2vmin);\n  font-family: 'Press Start 2P';\n`;\n\nexport const Text = styled.p`\n  color: white;\n  padding: 0px 20px;\n  margin: 10px 0px;\n  font-size: calc(4px + 2vmin);\n  font-family: Quicksand;\n`;\n\nexport const Link = styled.a.attrs({\n  target: \"_blank\",\n  rel: \"noopener noreferrer\",\n})`\n  color: ${themeOptions.palette.secondary.main};\n  margin-top: 8px;\n  margin-bottom: 8px;\n  font-size: 10px;\n  font-family: \"Press Start 2P\";\n`;\n\nexport const Button = styled.button`\n  background-color: ${themeOptions.palette.primary.main};\n  border: none;\n  border-radius: 8px;\n  color: white;\n  cursor: pointer;\n  font-size: 16px;\n  text-align: center;\n  text-decoration: none;\n  margin: 0px 20px;\n  padding: 10px 14px;\n  margin-top: 8px;\n  margin-bottom: 8px;\n  font-family: Quicksand;\n\n  ${props => props.hidden && \"hidden\"} :focus {\n    border: none;\n    outline: none;\n  }\n`;\n","export default __webpack_public_path__ + \"static/media/Arbol_logo.55e4141f.png\";","import { Web3Provider } from \"@ethersproject/providers\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport Web3Modal from \"web3modal\";\n// import Formatic from \"formatic\";\n// const ALCHEMY_TOKEN = process.env.ALCHEMY_TOKEN;\nconst INFURA_ID = \"57683385d9284daea40fe2f6e42269f9\";\nconst NETWORK = \"kovan\";\n\nfunction useWeb3Modal(config = {}) {\n  const [provider, setProvider] = useState();\n  const [autoLoaded, setAutoLoaded] = useState(false);\n  const { autoLoad = true, providerID = INFURA_ID, network = NETWORK } = config;\n\n  // Web3Modal also supports many other wallets.\n  // You can see other options at https://github.com/Web3Modal/web3modal\n  const web3Modal = useMemo(() => {\n    return new Web3Modal({\n      network,\n      cacheProvider: true,\n      providerOptions: {\n        walletconnect: {\n          package: WalletConnectProvider,\n          options: {\n            infuraid: providerID\n          },\n        },\n      },\n    });\n  }, [providerID, network]);\n\n  // Open wallet selection modal.\n  const loadWeb3Modal = useCallback(async () => {\n    const newProvider = await web3Modal.connect();\n    setProvider(new Web3Provider(newProvider));\n  }, [web3Modal]);\n\n  const logoutOfWeb3Modal = useCallback(\n    async function () {\n      await web3Modal.clearCachedProvider();\n      window.location.reload();\n    },\n    [web3Modal],\n  );\n\n  // If autoLoad is enabled and the the wallet had been loaded before, load it automatically now.\n  useEffect(() => {\n    if (autoLoad && !autoLoaded && web3Modal.cachedProvider) {\n      console.log(\"auto\");\n      loadWeb3Modal();\n      setAutoLoaded(true);\n    }\n  }, [autoLoad, autoLoaded, loadWeb3Modal, setAutoLoaded, web3Modal.cachedProvider]);\n\n  return [provider, loadWeb3Modal, logoutOfWeb3Modal];\n}\n\nexport default useWeb3Modal;\n","// This address points to a dummy ERC20 contract deployed on Ethereum Mainnet,\n// Goerli, Kovan, Rinkeby and Ropsten. Replace it with your smart contracts.\nconst Contracts = require(\"./logs/contracts.json\");\nconst Providers = require(\"./logs/providers.json\");\n\nvar _addresses = {LINK: \"0xa36085F69e2889c224210F603D836748e7dC0088\", USDC: \"0xe8AA8A60C9417d8fD59EB4378687dDCEEd29c1B4\"};\nfor (const [cname, cdata] of Object.entries(Contracts)) {\n  _addresses[cname] = cdata.address;\n}\nfor (const [pname, pdata] of Object.entries(Providers)) {\n  _addresses[pname] = pdata.address;\n}\nconst addresses = _addresses;\n\nexport default addresses;\n","import RainfallDerivativeProviderAbi from \"./abis/RainfallDerivativeProvider.json\";\nimport RainfallOptionAbi from \"./abis//RainfallOption.json\";\nimport BlizzardDerivativeProviderAbi from \"./abis/BlizzardDerivativeProvider.json\";\nimport BlizzardOptionAbi from \"./abis/BlizzardOption.json\";\nimport erc20Abi from \"./abis/erc20.json\";\n\n\nconst abis = {\n  RainfallDerivativeProvider: RainfallDerivativeProviderAbi.abi,\n  RainfallOption: RainfallOptionAbi.abi,\n  BlizzardDerivativeProvider: BlizzardDerivativeProviderAbi.abi,\n  BlizzardOption: BlizzardOptionAbi.abi,\n  erc20: erc20Abi\n};\n\nexport default abis;\n","import { Contract } from \"@ethersproject/contracts\";\nimport { getAddress } from \"@ethersproject/address\";\nimport React, { useEffect, useState } from \"react\";\n\nimport { Body, Image, Text, Link, Col, themeOptions } from \"./components\";\nimport logo from \"./Arbol_logo.png\";\nimport useWeb3Modal from \"./hooks/useWeb3Modal\";\nimport { addresses, abis } from \"@project/contracts\";\n\nimport { Grid, Button, AppBar, Box, Toolbar } from '@mui/material';\nimport { ThemeProvider, createTheme } from '@mui/material/styles';\nimport { DataGrid } from '@mui/x-data-grid';\n\nexport const theme = createTheme(themeOptions);\n\nconst addressBook = {\n  \"0x69640770407A09B166AED26B778699045B304768\": \"Operator\",\n  \"0xa679c6154b8d4619Af9F83f0bF9a13A680e01eCf\": \"Purchaser\",\n  \"0xbf417C41F3ab1e01BD6867fB540dA7b734EaeA95\": \"Provider\",\n  [addresses.BlizzardDerivativeProvider]: \"Contract\"\n\n\n}\n\n\nfunction WalletButton({ provider, loadWeb3Modal, logoutOfWeb3Modal }) {\n  const [account, setAccount] = useState(\"\");\n  const [rendered, setRendered] = useState(\"\");\n\n  useEffect(() => {\n    async function fetchAccount() {\n      try {\n        if (!provider) {\n          return;\n        }\n\n        // Load the user's accounts.\n        const accounts = await provider.listAccounts();\n        setAccount(accounts[0]);\n\n        // disabled for testing (not on Mainnet)\n        // // Resolve the ENS name for the first account.\n        // const name = await provider.lookupAddress(accounts[0]);\n\n        // Render either the ENS name or the shortened account address.\n        // if (name) {\n        //   setRendered(name);\n        // } else {\n        setRendered(account.substring(0, 6) + \"...\" + account.substring(36));\n        // }\n      } catch (err) {\n        setAccount(\"\");\n        setRendered(\"\");\n        console.error(err);\n      }\n    }\n    fetchAccount();\n  }, [account, provider, setAccount, setRendered]);\n\n  return (\n    <Button \n      variant=\"Text\"\n      sx={{\n        \"margin\": \"8px 4px\",\n        'background': 'linear-gradient(45deg, #FFC400 30%, #FFCF33 90%)',\n        'border': 0,\n        'borderRadius': 3,\n        'boxShadow': '0 3px 5px 2px rgba(0, 0, 0, .3)',\n        'color': 'white',\n      }}\n      onClick={() => {\n        if (!provider) {\n          loadWeb3Modal();\n        } else {\n          logoutOfWeb3Modal();\n        }\n      }}\n    >\n      {rendered === \"\" && \"Connect Wallet\"}\n      {rendered !== \"\" && rendered}\n    </Button>\n  );\n}\n \nfunction App() {\n  // const { loading, error, data } = useQuery(GET_TRANSFERS);\n  const [provider, loadWeb3Modal, logoutOfWeb3Modal] = useWeb3Modal();\n  // const [normalRows, setNormalRows] = useState([]);\n  const [internalRows, setInternalRows] = useState([]);\n  const [tokenRows, setTokenRows] = useState([]);\n\n  // const normalColumns = [\n  //   { field: 'id', headerName: '#', width: 10 },\n  //   { field: 'hash', headerName: 'Tx Hash', width: 120 },\n  //   { field: 'from', headerName: 'Caller', width: 120 },\n  //   // { field: 'action', headerName: 'Action', width: 120 },\n  //   // { field: 'explorer', headerName: 'Tx Link', width: 320 },\n  //   { field: 'time', headerName: 'Time', width: 200 },\n  // ];\n\n  const tokenColumns = [\n    { field: 'id', headerName: '#', width: 10 },\n\n    { field: 'time', headerName: 'Time', width: 200 },\n    { field: 'hash', headerName: 'Tx Hash', width: 120 },\n    { field: 'from', headerName: 'Caller', width: 120 },\n    { field: 'action', headerName: 'Action', width: 160 },\n    { field: 'value', headerName: 'Amount', width: 120 },\n  ];\n\n  const internalColumns = [\n    { field: 'id', headerName: '#', width: 10 },\n\n    { field: 'time', headerName: 'Time', width: 200 },\n    { field: 'hash', headerName: 'Tx Hash', width: 120 },\n    { field: 'action', headerName: 'Action', width: 200 },\n  ];\n\n  // useEffect(() => {\n  //   fetch(\"https://api-kovan.etherscan.io/api?module=account&action=txlist&address=\"+addresses.BlizzardDerivativeProvider+\"&startblock=0&endblock=99999999&sort=asc&apikey=\"+process.env.REACT_APP_ETHERSCAN_KEY)\n  //   // fetch(\"https://api-kovan.etherscan.io/api?module=account&action=tokentx&address=\"+addresses.BlizzardDerivativeProvider+\"&startblock=0&endblock=999999999&sort=asc&apikey=\"+process.env.REACT_APP_ETHERSCAN_KEY)\n  //   // fetch(\"https://api-kovan.etherscan.io/api?module=account&action=txlistinternal&address=\"+addresses.BlizzardDerivativeProvider+\"&startblock=0&endblock=999999999&sort=asc&apikey=\"+process.env.REACT_APP_ETHERSCAN_KEY)\n  //   .then(resp => resp.json())\n  //   .then(data => {\n  //     console.log(data)\n  //     normalDataSetter(data.result)})\n  //   }, []);\n\n  // async function normalDataSetter(data) {\n  //   var new_rows = []\n  //   for (var i = 0; i < data.length; i++) {\n  //     const row = data[i];\n  //     row[\"id\"] = i;\n  //     var date = new Date(parseInt(row[\"timeStamp\"]) * 1000);\n  //     row[\"time\"] = date.toISOString();\n  //     if (getAddress(row[\"from\"]) in addressBook) {\n  //       row[\"from\"] = addressBook[getAddress(row[\"from\"])];\n  //     }\n  //     new_rows.push(row);\n  //   }\n  //   setNormalRows(new_rows.reverse());\n  // }\n\n  useEffect(() => {\n    // fetch(\"https://api-kovan.etherscan.io/api?module=account&action=txlist&address=\"+addresses.BlizzardDerivativeProvider+\"&startblock=0&endblock=99999999&sort=asc&apikey=\"+process.env.REACT_APP_ETHERSCAN_KEY)\n    fetch(\"https://api-kovan.etherscan.io/api?module=account&action=tokentx&address=\"+addresses.BlizzardDerivativeProvider+\"&startblock=0&endblock=999999999&sort=asc&apikey=\"+process.env.REACT_APP_ETHERSCAN_KEY)\n    // fetch(\"https://api-kovan.etherscan.io/api?module=account&action=txlistinternal&address=\"+addresses.BlizzardDerivativeProvider+\"&startblock=0&endblock=999999999&sort=asc&apikey=\"+process.env.REACT_APP_ETHERSCAN_KEY)\n    .then(resp => resp.json())\n    .then(data => {\n      tokenDataSetter(data.result)})\n    }, []);\n\n  async function tokenDataSetter(data) {\n    var new_rows = []\n    for (var i = 0; i < data.length; i++) {\n      const row = data[i];\n      row[\"id\"] = i;      \n      var date = new Date(parseInt(row[\"timeStamp\"]) * 1000);\n      row[\"time\"] = date.toISOString();\n      if (row[\"value\"].startsWith(\"25\")) {\n        row[\"action\"] = \"Escrow Collateral\";\n      } else {\n        row[\"action\"] = \"Deposit Premium\";\n      }\n      if (getAddress(row[\"from\"]) in addressBook) {\n        row[\"from\"] = addressBook[getAddress(row[\"from\"])];\n      }\n      new_rows.push(row);\n    }\n    setTokenRows(new_rows.reverse());\n  }\n\n\n  useEffect(() => {\n    // fetch(\"https://api-kovan.etherscan.io/api?module=account&action=txlist&address=\"+addresses.BlizzardDerivativeProvider+\"&startblock=0&endblock=99999999&sort=asc&apikey=\"+process.env.REACT_APP_ETHERSCAN_KEY)\n    // fetch(\"https://api-kovan.etherscan.io/api?module=account&action=tokentx&address=\"+addresses.BlizzardDerivativeProvider+\"&startblock=0&endblock=999999999&sort=asc&apikey=\"+process.env.REACT_APP_ETHERSCAN_KEY)\n    fetch(\"https://api-kovan.etherscan.io/api?module=account&action=txlistinternal&address=\"+addresses.BlizzardDerivativeProvider+\"&startblock=0&endblock=999999999&sort=asc&apikey=\"+process.env.REACT_APP_ETHERSCAN_KEY)\n    .then(resp => resp.json())\n    .then(data => {\n      internalDataSetter(data.result)})\n    }, []);\n\n  async function internalDataSetter(data) {\n    var new_rows = [];\n    var deploy_hashes = [];\n    for (var i = 0; i < data.length; i++) {\n      const row = data[i];\n      row[\"id\"] = i;\n      var date = new Date(parseInt(row[\"timeStamp\"]) * 1000);\n      row[\"time\"] = date.toISOString();\n      if (row[\"type\"] !== \"create\") {\n        deploy_hashes.push(row[\"hash\"]);\n      }\n      if (row[\"type\"] === \"staticcall\") {\n        row[\"action\"] = \"Get Parameters\";\n      } else if (row[\"type\"] === \"call\") {\n        row[\"action\"] = \"Authorize Transfer\";\n      }\n      if (getAddress(row[\"from\"]) in addressBook) {\n        row[\"from\"] = addressBook[getAddress(row[\"from\"])];\n      }\n      new_rows.push(row);\n    }\n    for (var j = 0; j < new_rows.length; j++) {\n      const row = new_rows[j];\n      if (row[\"type\"] === \"create\") {\n        if (deploy_hashes.includes(row[\"hash\"])) {\n          row[\"action\"] = \"Deploy Contract\";\n        } else {\n          row[\"action\"] = \"Deploy Test Contract\";\n        }\n      }\n    }\n    setInternalRows(new_rows.reverse());\n  }\n\n\n  async function depositUSDC(_provider) {\n    const defaultSigner = _provider.getSigner();\n    const defaultAddress = await defaultSigner.getAddress();\n    const MainContract = new Contract(addresses.BlizzardDerivativeProvider, abis.BlizzardDerivativeProvider, defaultSigner);\n    const usdc = new Contract(addresses.USDC, abis.erc20, defaultSigner);\n\n    var oracleBank = await MainContract.ORACLE_BANK();\n    var collateralAddress = await MainContract.COLLATERAL_ADDRESS();\n    var premiumAddress = await MainContract.PREMIUM_ADDRESS();\n    var collateralAmount = await MainContract.COLLATERAL_PAYMENT();\n    var premiumAmount = await MainContract.PREMIUM_PAYMENT();\n\n    if (defaultAddress === collateralAddress) {\n\n      var tx = await usdc.approve(addresses.BlizzardDerivativeProvider, collateralAmount);\n      await tx.wait();\n\n      tx = await MainContract.depositCollateral();\n      await tx.wait();\n    } else if (defaultAddress === premiumAddress) {\n\n      tx = await usdc.approve(addresses.BlizzardDerivativeProvider, premiumAmount);\n      await tx.wait();\n\n      tx = await MainContract.depositPremium();\n      await tx.wait();\n\n      const deployedAddress = await MainContract.blizzardContract();\n      console.log(deployedAddress);\n    } else if (defaultAddress === oracleBank) {\n\n      tx = await usdc.approve(addresses.BlizzardDerivativeProvider, collateralAmount + premiumAmount);\n      await tx.wait();\n\n      tx = await MainContract.depositCollateral();\n      await tx.wait();\n      tx = await MainContract.depositPremium();\n      await tx.wait();\n\n      const deployedAddress = await MainContract.blizzardContract();\n      console.log(deployedAddress);\n    }\n  }\n\n  // React.useEffect(() => {\n  //   if (!loading && !error && data && data.transfers) {\n  //     console.log({ transfers: data.transfers });\n  //   }\n  // }, [loading, error, data]);\n\n  return (\n      <div>\n        <ThemeProvider theme={theme}>\n          <Box sx={{ flexGrow: 1 }}>\n            <AppBar position=\"static\">\n              <Toolbar sx={{\"justifyContent\": \"space-between\", 'boxShadow': '0 3px 5px 2px rgba(0, 0, 0, .3)'}}>\n                <Link href=\"https://www.arbolmarket.com/\" style={{ textDecoration: 'none', marginTop: \"8px\", fontSize: \"calc(12px + 2vmin)\" }}> {'ARBOL-dAPP PORTAL'} </Link>\n                  <WalletButton provider={provider} loadWeb3Modal={loadWeb3Modal} logoutOfWeb3Modal={logoutOfWeb3Modal} />\n              </Toolbar>\n            </AppBar>\n          </Box>\n          <Body>\n            <Grid\n              container\n              direction=\"row\"\n              justifyContent=\"space-around\"\n              alignItems='stretch'\n            >\n              <Grid item xs={6}>\n                <Col>\n                  <Image src={logo} alt=\"react-logo\" />\n                      <Text> \n                        Provider\n                      </Text>\n                      <Button \n                        variant=\"contained\" \n                        sx={{\n                          \"margin\": \"8px 4px\",\n                          'background': 'linear-gradient(45deg, #EF5350 30%, #EA6A6A 90%)',\n                          'border': 0,\n                          'borderRadius': 3,\n                          'boxShadow': '0 3px 5px 2px rgba(255, 255, 255, .3)',\n                          'color': 'white',\n                        }} \n                        onClick={() => depositUSDC(provider)}>\n                        ESCROW COLLATERAL\n                      </Button>\n                      <Text> \n                        Purchaser\n                      </Text>\n                      <Button \n                        variant=\"contained\" \n                        sx={{\n                          \"margin\": \"8px 4px\",\n                          'background': 'linear-gradient(45deg, #EF5350 30%, #EA6A6A 90%)',\n                          'border': 0,\n                          'borderRadius': 3,\n                          'boxShadow': '0 3px 5px 2px rgba(255, 255, 255, .3)',\n                          'color': 'white',\n                        }} \n                        onClick={() => depositUSDC(provider)}>\n                        PURCHASE CONTRACT\n                      </Button>\n                  <Text> \n                    The Arbol-dApp Portal provides an endpoint for interacting with Arbol's deployed Weather Derivative Provider smart contracts. \n                  </Text>\n                  <Text>\n                    The Escrow Collateral option approves the Derivative Provider smart contract to transfer the collateral cost in USDC from the caller's wallet, then executes the actual transfer. Collateral must be deposited before contract purchase.\n                  </Text>\n                  <Text>\n                    The Purchase Contract option approves the smart contract to transfer the premium cost in USDC from the caller's wallet, then executes the actual transfer and instantiates a new Option contract.\n                    Transactions and token transfers with the Derivative Provider smart contract are updated on refresh.\n                  </Text>\n                      <Link href={\"https://kovan.etherscan.io/address/\" + addresses.BlizzardDerivativeProvider} style={{ marginTop: \"8px\" }}> etherscan </Link>\n                      <Link href=\"https://github.com/Arbol-Project/Arbol-dApp\" style={{ marginTop: \"8px\" }}> source </Link>\n                </Col>\n              </Grid>\n            <Grid item xs={6}>\n              <Col>\n                {/* <div style={{ height: 250, width: '90%', marginTop: \"50px\", marginBottom: \"20px\"}}>\n                  <DataGrid\n                    rows={normalRows}\n                    columns={normalColumns}\n                    pageSize={8}\n                    rowsPerPageOptions={[8]}\n                  />\n                </div> */}\n                <Text>\n                    Token Transfers\n                  </Text>\n                <div style={{ height: 200, width: '90%', marginTop: \"10px\", marginBottom: \"40px\"}}>\n                  <DataGrid\n                    rows={tokenRows}\n                    columns={tokenColumns}\n                    pageSize={8}\n                    rowsPerPageOptions={[8]}\n                  />\n                </div>\n                  <Text>\n                    Internal Transactions\n                  </Text>\n                <div style={{ height: 400, width: '90%', marginTop: \"10px\", marginBottom: \"20px\"}}>\n                  <DataGrid\n                    rows={internalRows}\n                    columns={internalColumns}\n                    pageSize={8}\n                    rowsPerPageOptions={[8]}\n                  />\n                </div>\n              </Col>\n            </Grid>\n          </Grid>\n          </Body>\n        </ThemeProvider>\n      </div>\n  );\n}\n\nexport default App;","import \"./index.css\";\n\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport ApolloClient from \"apollo-boost\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\n// You should replace this url with your own and put it into a .env file\n// See all subgraphs: https://thegraph.com/explorer/\nconst client = new ApolloClient({\n  uri: \"\",\n});\n\nReactDOM.render(\n  <ApolloProvider client={client} value={[]}>\n    <App />\n  </ApolloProvider>,\n  document.getElementById(\"root\"),\n);\n"],"sourceRoot":""}